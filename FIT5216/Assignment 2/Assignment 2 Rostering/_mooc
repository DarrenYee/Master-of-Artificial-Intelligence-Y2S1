{
    "assignmentKey": "c2QGQWR1FM",
    "history": {
        "files": {
            "models/nroster.mzn": {
                "changes": [
                    {
                        "edits": [
                            {
                                "line": 63,
                                "text": "      | 1,2,3,4,5|]; %DUMMY(10)    ",
                                "type": "deletion"
                            },
                            {
                                "line": 64,
                                "text": "       ",
                                "type": "deletion"
                            },
                            {
                                "line": 65,
                                "text": "array [NURSE,DAYS] of var 0..1: sh_off;",
                                "type": "deletion"
                            },
                            {
                                "line": 66,
                                "text": "array [NURSE,DAYS] of var 0..1: sh_nigh;",
                                "type": "deletion"
                            },
                            {
                                "line": 67,
                                "text": "      | 1,2,3,4,5|]; %DUMMY(10)     ",
                                "type": "insertion"
                            },
                            {
                                "line": 68,
                                "text": "constraint forall (n in NURSE, day in DAYS) ((sh[n,day] = OFF <-> wd[n,day] = dummy) /\\ (rostered_off[n,day] -> (sh[n,day] = OFF)) /\\ (sh_off[n,day] = bool2int(sh[n,day] != OFF)) /\\ (sh_nigh[n,day] = bool2int(sh[n,day] = NIGH)));",
                                "type": "deletion"
                            },
                            {
                                "line": 69,
                                "text": "constraint forall (n in NURSE, day in DAYS) (sh[n,day] = OFF <-> wd[n,day] = dummy);",
                                "type": "insertion"
                            },
                            {
                                "line": 70,
                                "text": "constraint forall (n in NURSE, day in DAYS) (rostered_off[n,day] -> (sh[n,day] = OFF));",
                                "type": "insertion"
                            },
                            {
                                "line": 70,
                                "text": "",
                                "type": "insertion"
                            },
                            {
                                "line": 87,
                                "text": "array [NURSE,DAYS] of var 0..1: sh_off;",
                                "type": "insertion"
                            },
                            {
                                "line": 87,
                                "text": "array [NURSE,DAYS] of var 0..1: sh_nigh;",
                                "type": "insertion"
                            },
                            {
                                "line": 88,
                                "text": "constraint forall (n in NURSE, day in DAYS) (sh_off[n,day] = bool2int(sh[n,day] != OFF) /\\ sh_nigh[n,day] = bool2int(sh[n,day] = NIGH));",
                                "type": "insertion"
                            }
                        ],
                        "timestamp": 1713764846.811
                    },
                    {
                        "edits": [
                            {
                                "line": 91,
                                "text": "constraint forall (n in NURSE) (sliding_sum(0, maxweek, 7,[sh_off[n, day] |day in DAYS]) /\\ sliding_sum(minfort, nday, 14,[sh_off[n, day] | day in DAYS]) /\\ sliding_sum(0, maxnightfort, 14,[sh_nigh[n, day] | day in DAYS]));",
                                "type": "deletion"
                            },
                            {
                                "line": 92,
                                "text": "constraint forall (n in NURSE) (sliding_sum(0, maxweek, 7,[sh_off[n, day] |day in DAYS]) /\\ sliding_sum(0, maxnightfort, 14,[sh_nigh[n, day] | day in DAYS]));",
                                "type": "insertion"
                            },
                            {
                                "line": 92,
                                "text": "constraint forall (n in NURSE) (sliding_sum(minfort, nday, 14,[sh_off[n, day] | day in DAYS]);",
                                "type": "insertion"
                            }
                        ],
                        "timestamp": 1713766256.796
                    },
                    {
                        "edits": [
                            {
                                "line": 92,
                                "text": "constraint forall (n in NURSE) (sliding_sum(minfort, nday, 14,[sh_off[n, day] | day in DAYS]);",
                                "type": "deletion"
                            },
                            {
                                "line": 93,
                                "text": "constraint forall (n in NURSE) (sliding_sum(minfort, nday, 14,[sh_off[n, day] | day in DAYS]));",
                                "type": "insertion"
                            }
                        ],
                        "timestamp": 1713766261.361
                    },
                    {
                        "edits": [
                            {
                                "line": 91,
                                "text": "constraint forall (n in NURSE) (sliding_sum(0, maxweek, 7,[sh_off[n, day] |day in DAYS]) /\\ sliding_sum(0, maxnightfort, 14,[sh_nigh[n, day] | day in DAYS]));",
                                "type": "deletion"
                            },
                            {
                                "line": 92,
                                "text": "constraint forall (n in NURSE) (sliding_sum(0, maxweek, 7,[sh_off[n, day] |day in DAYS]));",
                                "type": "insertion"
                            },
                            {
                                "line": 93,
                                "text": "constraint forall (n in NURSE) (sliding_sum(0, maxnightfort, 14,[sh_nigh[n, day] | day in DAYS]));",
                                "type": "insertion"
                            },
                            {
                                "line": 93,
                                "text": "",
                                "type": "insertion"
                            }
                        ],
                        "timestamp": 1713766295.875
                    },
                    {
                        "edits": [
                            {
                                "line": 91,
                                "text": "constraint forall (n in NURSE) (sliding_sum(0, maxweek, 7,[sh_off[n, day] |day in DAYS]));",
                                "type": "deletion"
                            },
                            {
                                "line": 92,
                                "text": "constraint forall (n in NURSE) (sliding_sum(minfort, nday, 14,[sh_off[n, day] | day in DAYS]));",
                                "type": "deletion"
                            },
                            {
                                "line": 93,
                                "text": "constraint forall (n in NURSE) (sliding_sum(0, maxnightfort, 14,[sh_nigh[n, day] | day in DAYS]));",
                                "type": "deletion"
                            },
                            {
                                "line": 94,
                                "text": "",
                                "type": "deletion"
                            },
                            {
                                "line": 95,
                                "text": "",
                                "type": "deletion"
                            },
                            {
                                "line": 96,
                                "text": "constraint forall (n in NURSE) (sliding_sum(0, maxweek, 7,[sh_off[n, day] |day in DAYS]) /\\ sliding_sum(minfort, nday, 14,[sh_off[n, day] | day in DAYS]) /\\ sliding_sum(0, maxnightfort, 14,[sh_nigh[n, day] | day in DAYS]));",
                                "type": "insertion"
                            }
                        ],
                        "timestamp": 1713766328.328
                    },
                    {
                        "edits": [
                            {
                                "line": 67,
                                "text": "constraint forall (n in NURSE, day in DAYS) (rostered_off[n,day] -> (sh[n,day] = OFF));",
                                "type": "deletion"
                            },
                            {
                                "line": 68,
                                "text": "constraint forall (n in NURSE, day in DAYS) (rostered_off[n,day] -> (sh[n,day] = OFF) /\\ sh_off[n,day] = bool2int(sh[n,day] != OFF) /\\ sh_nigh[n,day] = bool2int(sh[n,day] = NIGH));",
                                "type": "insertion"
                            }
                        ],
                        "timestamp": 1713766366.644
                    },
                    {
                        "edits": [
                            {
                                "line": 89,
                                "text": "constraint forall (n in NURSE, day in DAYS) (sh_off[n,day] = bool2int(sh[n,day] != OFF) /\\ sh_nigh[n,day] = bool2int(sh[n,day] = NIGH));",
                                "type": "deletion"
                            }
                        ],
                        "timestamp": 1713766370.068
                    },
                    {
                        "edits": [
                            {
                                "line": 63,
                                "text": "      | 1,2,3,4,5|]; %DUMMY(10)     ",
                                "type": "deletion"
                            },
                            {
                                "line": 64,
                                "text": "      | 1,2,3,4,5|]; %DUMMY(10) ",
                                "type": "insertion"
                            },
                            {
                                "line": 64,
                                "text": "          ",
                                "type": "insertion"
                            },
                            {
                                "line": 64,
                                "text": "array [NURSE,DAYS] of var 0..1: sh_off;",
                                "type": "insertion"
                            },
                            {
                                "line": 64,
                                "text": "array [NURSE,DAYS] of var 0..1: sh_nigh;",
                                "type": "insertion"
                            },
                            {
                                "line": 86,
                                "text": "array [NURSE,DAYS] of var 0..1: sh_off;",
                                "type": "deletion"
                            },
                            {
                                "line": 87,
                                "text": "array [NURSE,DAYS] of var 0..1: sh_nigh;",
                                "type": "deletion"
                            },
                            {
                                "line": 88,
                                "text": "",
                                "type": "insertion"
                            }
                        ],
                        "timestamp": 1713766393.369
                    },
                    {
                        "edits": [
                            {
                                "line": 63,
                                "text": "      | 1,2,3,4,5|]; %DUMMY(10) ",
                                "type": "deletion"
                            },
                            {
                                "line": 64,
                                "text": "          ",
                                "type": "deletion"
                            },
                            {
                                "line": 65,
                                "text": "array [NURSE,DAYS] of var 0..1: sh_off;",
                                "type": "deletion"
                            },
                            {
                                "line": 66,
                                "text": "array [NURSE,DAYS] of var 0..1: sh_nigh;",
                                "type": "deletion"
                            },
                            {
                                "line": 67,
                                "text": "      | 1,2,3,4,5|]; %DUMMY(10)     ",
                                "type": "insertion"
                            },
                            {
                                "line": 70,
                                "text": "constraint forall (n in NURSE, day in DAYS) (rostered_off[n,day] -> (sh[n,day] = OFF) /\\ sh_off[n,day] = bool2int(sh[n,day] != OFF) /\\ sh_nigh[n,day] = bool2int(sh[n,day] = NIGH));",
                                "type": "deletion"
                            },
                            {
                                "line": 71,
                                "text": "constraint forall (n in NURSE, day in DAYS) (rostered_off[n,day] -> (sh[n,day] = OFF));",
                                "type": "insertion"
                            },
                            {
                                "line": 89,
                                "text": "array [NURSE,DAYS] of var 0..1: sh_off;",
                                "type": "insertion"
                            },
                            {
                                "line": 89,
                                "text": "array [NURSE,DAYS] of var 0..1: sh_nigh;",
                                "type": "insertion"
                            },
                            {
                                "line": 90,
                                "text": "",
                                "type": "deletion"
                            },
                            {
                                "line": 91,
                                "text": "constraint forall (n in NURSE, day in DAYS) (sh_off[n,day] = bool2int(sh[n,day] != OFF) /\\ sh_nigh[n,day] = bool2int(sh[n,day] = NIGH));",
                                "type": "insertion"
                            }
                        ],
                        "timestamp": 1713766436.22
                    },
                    {
                        "edits": [
                            {
                                "line": 64,
                                "text": "      ",
                                "type": "insertion"
                            },
                            {
                                "line": 64,
                                "text": "array [NURSE,DAYS] of var 0..1: sh_off;",
                                "type": "insertion"
                            },
                            {
                                "line": 64,
                                "text": "array [NURSE,DAYS] of var 0..1: sh_nigh;",
                                "type": "insertion"
                            },
                            {
                                "line": 67,
                                "text": "constraint forall (n in NURSE, day in DAYS) (rostered_off[n,day] -> (sh[n,day] = OFF));",
                                "type": "deletion"
                            },
                            {
                                "line": 68,
                                "text": "constraint forall (n in NURSE, day in DAYS) ((rostered_off[n,day] -> (sh[n,day] = OFF)) /\\ (sh_off[n,day] = bool2int(sh[n,day] != OFF)) /\\ (sh_nigh[n,day] = bool2int(sh[n,day] = NIGH)));",
                                "type": "insertion"
                            },
                            {
                                "line": 86,
                                "text": "array [NURSE,DAYS] of var 0..1: sh_off;",
                                "type": "deletion"
                            },
                            {
                                "line": 87,
                                "text": "array [NURSE,DAYS] of var 0..1: sh_nigh;",
                                "type": "deletion"
                            },
                            {
                                "line": 89,
                                "text": "constraint forall (n in NURSE, day in DAYS) (sh_off[n,day] = bool2int(sh[n,day] != OFF) /\\ sh_nigh[n,day] = bool2int(sh[n,day] = NIGH));",
                                "type": "deletion"
                            },
                            {
                                "line": 90,
                                "text": "",
                                "type": "insertion"
                            }
                        ],
                        "timestamp": 1713766462.509
                    },
                    {
                        "edits": [
                            {
                                "line": 64,
                                "text": "      ",
                                "type": "deletion"
                            },
                            {
                                "line": 65,
                                "text": "array [NURSE,DAYS] of var 0..1: sh_off;",
                                "type": "deletion"
                            },
                            {
                                "line": 66,
                                "text": "array [NURSE,DAYS] of var 0..1: sh_nigh;",
                                "type": "deletion"
                            },
                            {
                                "line": 70,
                                "text": "constraint forall (n in NURSE, day in DAYS) ((rostered_off[n,day] -> (sh[n,day] = OFF)) /\\ (sh_off[n,day] = bool2int(sh[n,day] != OFF)) /\\ (sh_nigh[n,day] = bool2int(sh[n,day] = NIGH)));",
                                "type": "deletion"
                            },
                            {
                                "line": 71,
                                "text": "constraint forall (n in NURSE, day in DAYS) (rostered_off[n,day] -> (sh[n,day] = OFF));",
                                "type": "insertion"
                            },
                            {
                                "line": 89,
                                "text": "array [NURSE,DAYS] of var 0..1: sh_off;",
                                "type": "insertion"
                            },
                            {
                                "line": 89,
                                "text": "array [NURSE,DAYS] of var 0..1: sh_nigh;",
                                "type": "insertion"
                            },
                            {
                                "line": 90,
                                "text": "constraint forall (n in NURSE, day in DAYS) (sh_off[n,day] = bool2int(sh[n,day] != OFF) /\\ sh_nigh[n,day] = bool2int(sh[n,day] = NIGH));",
                                "type": "insertion"
                            },
                            {
                                "line": 91,
                                "text": "",
                                "type": "deletion"
                            },
                            {
                                "line": 92,
                                "text": "constraint forall (n in NURSE) (sliding_sum(0, maxweek, 7,[sh_off[n, day] |day in DAYS]) /\\ sliding_sum(minfort, nday, 14,[sh_off[n, day] | day in DAYS]) /\\ sliding_sum(0, maxnightfort, 14,[sh_nigh[n, day] | day in DAYS]));",
                                "type": "insertion"
                            }
                        ],
                        "timestamp": 1713766493.387
                    }
                ],
                "snapshot": "% nurse rostering project\n% STAGE A data\nenum NURSE; % set of nurses to roster\nenum SHIFT = { MORN, DAY, EVEN, NIGH, OFF };\nint: nday;     % number of days for roster\nset of int: DAYS = 1..nday; \narray[NURSE,DAYS] of bool: rostered_off; % nurse is guaranteed an off shift\n% STAGE B data\nint: maxweek; % maximum working shifts in any 7 day period\nint: maxnightfort; % maximum night shifts in any 14 day period\nint: minfort; % minimum number of working shifts in any 14 day period\narray[SHIFT,DAYS] of int: minshift; % minimum number of nurses rostered on each shift\nset of int: DAYSPERWEEK = 0..6;\nset of int: DAYSPERFORT = 0..13;\n% STAGE C data\narray[NURSE] of int: shift_cost;  \n% STAGE D data\nenum WARD;  % set of wards to roster\nWARD: dummy; % dummy ward\narray[WARD,DAYS] of int: minward; % minimum number of nurses rostered to each ward\nconstraint forall(d in DAYS)(assert(minward[dummy,d] = 0, \"Dummy ward has non zero minimum on day \\(d)\\n\"));\nint: maxward; % maximum number of wards any nurse can work in the roster period\n% STAGE E data\nenum SKILL;\nSKILL: senior;                         % which skill is senior\narray[NURSE] of set of SKILL: skill;   % skills that each nurse has\narray[WARD] of set of SKILL: required; % particular skills for each ward\nopt WARD: emergency; % emergency ward if its being rostered\nenum SLICE = { PREDAWN, AM, PM, LATE };\n% coverage MORNING = {PREDAWN, AM}, \n%          DAY = {AM,PM} \n%          EVENING = {PM, LATE}, \n%          NIGHT {LATE, PREDAWN of the next day} \n\n%%%% DECISIONS\narray[NURSE,DAYS] of var SHIFT: sh; % shift for each nurse on each day\nvar 0..nday*sum(shift_cost): total_cost;\narray[NURSE,DAYS] of var WARD: wd; % ward rostered for each nurse\narray[WARD,DAYS] of var int: count_wd; % ward rostered for each nurse\n\n\n\n% MORN = no rules\n% DAY = DAY -> DAY then no rules\n% EVEN = EVEN -> all except for MORN\n% NIGH = No NIGH -> NIGH -> NIGH, NO NIGH -> DAY or MORN\n% OFF = no OFF -> OFF\n\ninclude \"globals.mzn\";\ninclude \"regular.mzn\";  \n\n      \narray[1..10,SHIFT] of 0..10: trans =\n      [|1,2,3,4,5  %MORN(1)\n      | 0,8,0,0,0  %DAY(2)\n      | 0,2,3,4,5  %EVEN(3)\n      | 0,0,3,6,5  %NIGH1(4)\n      | 1,2,3,4,9  %OFF1(5)\n      | 0,0,3,7,5  %NIGH2(6)\n      | 0,0,3,0,5  %NIGH3(7)\n      | 1,8,3,4,5  %DAY2(8)\n      | 1,2,3,4,0  %OFF2(9)\n      | 1,2,3,4,5|]; %DUMMY(10)     \n\nconstraint forall (n in NURSE, day in DAYS) (sh[n,day] = OFF <-> wd[n,day] = dummy);\n\nconstraint forall (n in NURSE, day in DAYS) (rostered_off[n,day] -> (sh[n,day] = OFF));\n\nconstraint forall(n in NURSE) (regular ([sh[n,day] |day in DAYS],10,5,trans,10,{1,2,3,4,5,6,7,8,9,10}));\n\n\n% Each Shift s for each d has at least minshift [s,d]\n% No more than maxweek shifts (excluding off) in 7 day period\n% No less than minfort in 14 day period\n% No more than maxnightfort NIGH in any 14 day perdod\n\n\nconstraint forall (day in DAYS) \n  (global_cardinality (\n    [sh[n,day] | n in NURSE],\n    [MORN, DAY, EVEN, NIGH, OFF],\n    [minshift[MORN,day],minshift[DAY,day],minshift[EVEN,day],minshift[NIGH,day],minshift[OFF,day]],\n    [card(NURSE),card(NURSE),card(NURSE),card(NURSE),card(NURSE)]\n));\n\narray [NURSE,DAYS] of var 0..1: sh_off;\narray [NURSE,DAYS] of var 0..1: sh_nigh;\n\nconstraint forall (n in NURSE, day in DAYS) (sh_off[n,day] = bool2int(sh[n,day] != OFF) /\\ sh_nigh[n,day] = bool2int(sh[n,day] = NIGH));\n\nconstraint forall (n in NURSE) (sliding_sum(0, maxweek, 7,[sh_off[n, day] |day in DAYS]) /\\ sliding_sum(minfort, nday, 14,[sh_off[n, day] | day in DAYS]) /\\ sliding_sum(0, maxnightfort, 14,[sh_nigh[n, day] | day in DAYS]));\n\narray[NURSE] of var int: total_shifts;\n\nconstraint total_cost = (sum(n in NURSE,d in DAYS) (sh_off[n,d]* shift_cost[n]));\n\nconstraint forall (w in WARD, day in DAYS) (count_wd[w,day] = (sum(n in NURSE) (wd[n,day] = w)) /\\ count_wd[w,day] >= minward[w,day]);\n\narray [NURSE] of var 1..maxward : distinct_wards;\n\nconstraint forall (n in NURSE) (distinct_wards[n] = nvalue([wd[n,day]|day in DAYS]));\n\n% If wd = ward then ward's speciality has to be on duty\nset of int: skill_max = 0..card(SKILL) +1;\narray [NURSE, DAYS] of var skill_max: testing;\nconstraint forall(n in NURSE,day in DAYS)(testing[n,day] =  card(skill[n] intersect required[wd[n,day]]) + (if (required[wd[n,day]] = {}) then 1 else 0 endif));\narray [WARD,DAYS] of var 0..card(NURSE): testing1; \n\n% constraint forall (n in NURSE,day in DAYS) (testing[n,day] > 0 );\n\nconstraint forall (w in WARD, day in DAYS) (if (minward[w,day] > 0) then ((testing1[w,day] = (sum (n in NURSE) (bool2int(wd[n,day] = w)*testing[n,day]))) > 0) endif);\n\n% % FOr each slice, there must be a senior\n\n% If emergency = True, \n\n\n\n\nsolve minimize total_cost;"
            }
        },
        "parent": "f55e082b-b4a7-4587-af16-1f052c691568",
        "uuid": "eb7a060a-5c08-415a-9e01-eee870178a07"
    },
    "modelAssignments": [
        {
            "id": "Jo5NoFv6uP",
            "model": "models/nroster.mzn",
            "name": "Nroster Model 1"
        }
    ],
    "moocName": "FIT5216 S1 2024",
    "moocPasswordString": "Submission token",
    "name": "Assignment 2 Rostering",
    "sendMeta": true,
    "solutionAssignments": [
        {
            "data": "data/nroster01.dzn",
            "id": "nS7XGZTCOF",
            "model": "models/nroster.mzn",
            "name": "Nroster 01",
            "timeout": "30"
        },
        {
            "data": "data/nroster04.dzn",
            "id": "RTIZIAYhIA",
            "model": "models/nroster.mzn",
            "name": "Nroster 04",
            "timeout": "30"
        },
        {
            "data": "data/nroster05.dzn",
            "id": "NOQLz5DmMf",
            "model": "models/nroster.mzn",
            "name": "Nroster 05",
            "timeout": "30"
        },
        {
            "data": "data/nroster06.dzn",
            "id": "KYGMfITU20",
            "model": "models/nroster.mzn",
            "name": "Nroster 06",
            "timeout": "60"
        },
        {
            "data": "data/nroster07.dzn",
            "id": "8EVvVCiubE",
            "model": "models/nroster.mzn",
            "name": "Nroster 07",
            "timeout": "60"
        },
        {
            "data": "data/nroster08.dzn",
            "id": "aQnqLph9Uv",
            "model": "models/nroster.mzn",
            "name": "Nroster 08",
            "timeout": "60"
        },
        {
            "data": "data/nroster09.dzn",
            "id": "RBMh0qZHJm",
            "model": "models/nroster.mzn",
            "name": "Nroster 09",
            "timeout": "60"
        },
        {
            "data": "data/nroster10.dzn",
            "id": "wUIpWQqdoO",
            "model": "models/nroster.mzn",
            "name": "Nroster 10",
            "timeout": "60"
        }
    ],
    "submissionTerms": "This is an individual assignment. Your submission has to be entirely your own work. We will use similarity detection software to detect any attempt at collusion, and the penalties are quite harsh. If in doubt, contact your teaching team with any questions! You may not use large language models such as ChatGPT for any part of this assignment",
    "submissionURL": "https://autograder.optimisation-2020.cloud.edu.au/api/index.php"
}
